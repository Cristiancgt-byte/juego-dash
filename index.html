<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Juego Shooter con Power-Ups</title>
  <style>
    body { 
      margin: 0; 
      background: #111; 
      color: white; 
      font-family: sans-serif; 
      text-align: center; 
    }
    canvas { 
      background: #000; 
      display: block; 
      margin: 10px auto; 
      border: 2px solid white; 
    }
    #ui { margin-top: 10px; }
    button { padding: 10px 20px; margin: 5px; font-size: 16px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Shooter con Power-Ups ðŸš€</h1>
  <canvas id="gameCanvas" width="600" height="400"></canvas>
  <div id="ui">
    <button id="startBtn">Comenzar</button>
    <button id="restartBtn" style="display:none;">Reiniciar</button>
    <p id="info"></p>
  </div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let game;

// === Clases ===
class Player {
  constructor() {
    this.x = canvas.width/2;
    this.y = canvas.height-40;
    this.size = 20;
    this.speed = 5;
    this.lives = 3;
    this.shield = false;
  }
  draw(){
    ctx.fillStyle = this.shield ? "cyan" : "lime";
    ctx.fillRect(this.x-this.size/2, this.y-this.size/2, this.size, this.size);
  }
}

class Bullet {
  constructor(x,y,dy,color="white"){
    this.x=x; this.y=y; this.dy=dy; this.size=5; this.color=color;
  }
  update(){ this.y+=this.dy; }
  draw(){
    ctx.fillStyle=this.color;
    ctx.fillRect(this.x-this.size/2, this.y-this.size/2, this.size, this.size);
  }
}

class Enemy {
  constructor(x,y){
    this.x=x; this.y=y; this.size=20; this.dy=1+Math.random()*1.5;
  }
  update(){ this.y+=this.dy; }
  draw(){
    ctx.fillStyle="red";
    ctx.fillRect(this.x-this.size/2, this.y-this.size/2, this.size, this.size);
  }
}

class Pickup {
  constructor(x,y,type){
    this.x=x; this.y=y; this.type=type; this.size=15; this.dy=1;
  }
  update(){ this.y+=this.dy; }
  draw(){
    ctx.fillStyle = this.type==="rapid" ? "yellow" :
                    this.type==="shield" ? "cyan" : "orange";
    ctx.beginPath();
    ctx.arc(this.x,this.y,this.size/2,0,Math.PI*2);
    ctx.fill();
  }
}

// === Inicializar Juego ===
function init(){
  game = {
    player: new Player(),
    bullets: [],
    enemies: [],
    pickups: [],
    score: 0,
    level: 1,
    keys: {},
    over: false,
    lastShot: 0,
    tick: 0,
    fireDelay: 20,
    multip: 1
  };
}

function shootBullet(){
  game.bullets.push(new Bullet(game.player.x, game.player.y-15, -5));
}

// === Main Update ===
function update(){
  if(game.over) return;
  game.tick++;

  // movimiento jugador
  if(game.keys["ArrowLeft"] || game.keys["a"]) game.player.x-=game.player.speed;
  if(game.keys["ArrowRight"] || game.keys["d"]) game.player.x+=game.player.speed;
  if(game.keys["ArrowUp"] || game.keys["w"]) game.player.y-=game.player.speed;
  if(game.keys["ArrowDown"] || game.keys["s"]) game.player.y+=game.player.speed;

  // limites
  game.player.x = Math.max(0, Math.min(canvas.width, game.player.x));
  game.player.y = Math.max(0, Math.min(canvas.height, game.player.y));

  // disparo
  if(game.keys["Space"] && game.tick - game.lastShot > game.fireDelay){
    shootBullet(); game.lastShot = game.tick;
  }

  // actualizar balas
  game.bullets.forEach(b=>b.update());
  game.bullets = game.bullets.filter(b=>b.y>-10);

  // spawnear enemigos
  if(game.tick%60===0){
    game.enemies.push(new Enemy(Math.random()*canvas.width, -20));
  }
  game.enemies.forEach(e=>e.update());

  // spawnear pickups
  if(game.tick%600===0){
    const types=["rapid","shield","double"];
    let type=types[Math.floor(Math.random()*types.length)];
    game.pickups.push(new Pickup(Math.random()*canvas.width, -20, type));
  }
  game.pickups.forEach(p=>p.update());

  // colisiones balas-enemigos
  for(let b of game.bullets){
    for(let e of game.enemies){
      if(Math.abs(b.x-e.x)<15 && Math.abs(b.y-e.y)<15){
        e.dead=true; b.dead=true;
        game.score += 10*game.multip;
      }
    }
  }
  game.bullets = game.bullets.filter(b=>!b.dead);
  game.enemies = game.enemies.filter(e=>!e.dead);

  // colisiones enemigo-jugador
  for(let e of game.enemies){
    if(Math.abs(e.x-game.player.x)<20 && Math.abs(e.y-game.player.y)<20){
      if(game.player.shield){
        e.dead=true;
        game.player.shield=false;
      } else {
        e.dead=true;
        game.player.lives--;
        if(game.player.lives<=0) game.over=true;
      }
    }
  }
  game.enemies = game.enemies.filter(e=>!e.dead);

  // colisiones pickups
  for(let p of game.pickups){
    if(Math.abs(p.x-game.player.x)<20 && Math.abs(p.y-game.player.y)<20){
      if(p.type==="rapid"){
        game.fireDelay=5;
        setTimeout(()=>game.fireDelay=20,5000);
      } else if(p.type==="shield"){
        game.player.shield=true;
      } else if(p.type==="double"){
        game.multip=2;
        setTimeout(()=>game.multip=1,5000);
      }
      p.dead=true;
    }
  }
  game.pickups = game.pickups.filter(p=>!p.dead);
}

// === Dibujo ===
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  game.player.draw();
  game.bullets.forEach(b=>b.draw());
  game.enemies.forEach(e=>e.draw());
  game.pickups.forEach(p=>p.draw());

  ctx.fillStyle="white";
  ctx.fillText("Puntos: "+game.score,10,20);
  ctx.fillText("Vidas: "+game.player.lives,10,40);
  if(game.player.shield) ctx.fillText("ESCUDO ACTIVO",10,60);
  if(game.multip>1) ctx.fillText("DOBLE PUNTOS!",10,80);

  if(game.over){
    ctx.fillStyle="red";
    ctx.font="30px sans-serif";
    ctx.fillText("GAME OVER", canvas.width/2-80, canvas.height/2);
  }
}

// === Loop ===
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

// === Input ===
window.addEventListener("keydown", e=>{
  game.keys[e.key]=true;
  game.keys[e.code]=true;
});
window.addEventListener("keyup", e=>{
  game.keys[e.key]=false;
  game.keys[e.code]=false;
});

// === Botones ===
document.getElementById("startBtn").onclick=()=>{
  init();
  loop();
  document.getElementById("startBtn").style.display="none";
  document.getElementById("restartBtn").style.display="inline-block";
};
document.getElementById("restartBtn").onclick=()=>{
  init();
};
</script>
</body>
</html>


